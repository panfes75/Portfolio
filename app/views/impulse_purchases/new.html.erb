<div class="container">
  <div class="row">
    <%= form_for :impulse_purchase, url: impulse_purchases_path do |f| %> 
      <div class="mb-3">
        <%= f.label :title, "タイトル" %>
        <%= f.text_field :title %>
      </div>
      <div class="mb-3">
        <%= f.label :purchase_amount, "購入金額" %>
        <%= f.number_field :purchase_amount, name: "purchase" %>
      </div>
      <div class="mb-3">
        <%= f.label :hourly_wage, "時給選択" %>
        <%= f.text_field :hourly_wage, name: "hourly_wage", list: "combolist" %>
        <datalist id="combolist">
          <option value=100>青森</option>
          <option value=200>秋田</option>
          <option value=300>東京</option>
        </datalist>
      </div>
      <input type="button" class="calc-btn" onclick="calc(purchase.value, hourly_wage.value);" value="計算">
      <hr class="line">
      <h1>結果</h1>
      <div class="mb-3">
        購入するには
        <%= f.number_field :operating_time, id: "time", readonly: "" %> 時間分の労働が必要です。
      </div>
      <div class="mb-3">
         <%= link_to  "購入を見送る？", "#" %>
        <%= link_to  "購入する？", "#" %>
        <%= f.submit  "計算" %>
      </div>
    <% end %>
  </div>
</div>

<script>
  function calc(purchase, hourly_wage) {
      const time_value = document.getElementById('time').value = parseFloat((purchase / hourly_wage).toFixed(2));
  }
</script>